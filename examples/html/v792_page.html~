
<!DOCTYPE HTML >
<html>

<head>
  <meta charset="UTF-8">
  <title>V792 Display</title>
  <script language="javascript" type="text/javascript" src="mhttpd.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <script language="javascript" type="text/javascript" src="rootana_functions.js"></script>
<style type="text/css">
input[type=number]{
    width: 60px;
}
#graphdiv21 {min-width:100%} 
#graphdiv21 {min-height:250px}
#graphdiv22 {min-width:100%}
#graphdiv22 {min-height:250px}
#graphdiv {min-width:100%}
#graphdiv {min-height:500px}


</style>
<script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/1.1.1/dygraph-combined.js"></script>
<script>

  var gHistoName = "V792_0_";
  var gMaxChannel = 32;

  function usev792(){
    gHistoName = "V792_0_";
    gMaxChannel = 32;
    document.getElementById("channel_number").max = 32;
    document.getElementById("channel_number").value = 0;
    document.getElementById("v792_select").style.backgroundColor = "lightgreen";
    document.getElementById("v1720_select").style.backgroundColor = "white";
  }

  function usev1720(){
    gHistoName = "V1720_";
    gMaxChannel = 8;
    document.getElementById("channel_number").value = 0;
    document.getElementById("channel_number").max = 8;
    document.getElementById("v792_select").style.backgroundColor = "white";
    document.getElementById("v1720_select").style.backgroundColor = "lightgreen";
  }

  function updatePlots(deleteDygraph){

  var channel = Number(document.getElementById("channel_number").value);


   var scan_type = document.getElementById("HistoDisplay").value;
   <!--document.getElementById("params").innerHTML = "You chose: " + scan_type; -->

   switch (scan_type) {
      case "Single":
        fillHistogramPlot("graphdiv",gHistoName+channel,0,deleteDygraph);
        break;
     case "Overlay":
       var numberOverlay = Number(document.getElementById("overlay_number").value);

       var histograms = [];
       for(var ii = 0; ii < numberOverlay; ii++){
         var index = channel + ii;
         if(index < gMaxChannel){
           histograms.push(gHistoName+index);
         }
       }          
 
       fillMultipleHistogramPlot("graphdiv",histograms,0,deleteDygraph);
       break;
     case "Multiple":
        fillHistogramPlot("graphdiv21",gHistoName+channel,0,deleteDygraph);
        if(Number(channel) < 31){
          fillHistogramPlot("graphdiv22",gHistoName+Number(channel+1),1,deleteDygraph);
        }else{
          fillHistogramPlot("graphdiv22",gHistoName+"0",1,deleteDygraph);
        }
        break;
   }


 
  
    document.getElementById("datetime").innerHTML = Date();
  }

function ShowParams() {
   var scan_type = document.getElementById("HistoDisplay").value;
   <!--document.getElementById("params").innerHTML = "You chose: " + scan_type; -->

   switch (scan_type) {
      case "Single":
        document.getElementById("OverlayParams").style.display = "none";
        document.getElementById("MultipleParams").style.display ="none";
        document.getElementById("graphdiv").style.display ="block";
        document.getElementById("graphdiv21").style.display ="none";
        document.getElementById("graphdiv22").style.display ="none";
        break;
     case "Overlay":
        document.getElementById("OverlayParams").style.display = "block";
        document.getElementById("MultipleParams").style.display ="none";
        document.getElementById("graphdiv").style.display ="block";
        document.getElementById("graphdiv21").style.display ="none";
        document.getElementById("graphdiv22").style.display ="none";
        break;
     case "Multiple":
        document.getElementById("OverlayParams").style.display = "none";
        document.getElementById("MultipleParams").style.display ="block";
        document.getElementById("graphdiv").style.display ="none";
        document.getElementById("graphdiv21").style.display ="block";
        document.getElementById("graphdiv22").style.display ="block";
        break;
     default:
        break;
   }
   updatePlots(true);
}

setInterval(updatePlots,5000);
</script>


</head>

<body onload="find_active_root_directory(); updatePlots(false);">
  <div class="container-fluid">
    
    <!--- Top banner --> 
    <div class="page-header">
      <font size="6"><b>Rootana Display</b></font>
      <button id="v792_select" style="background-color: lightgreen" onclick="usev792();updatePlots(true);"> 
        V792 </button>
      <button id="v1720_select"  onclick="usev1720();updatePlots(true);"> 
        V1720 </button>
      
    </div>


    <!--- Main display --> 
    <div class="row">
      
      <!--- Control buttons --> 
      <div class="col-md-3" >
        <b> V792 histograms</b><p>
          Channel:
          <input type="number" id="channel_number" min="0" max="31" value="0" onchange="updatePlots(true);"><p>
          
          Select Display Type
          <select id="HistoDisplay" onchange="ShowParams()">
            <option value="Single">Single</option>
            <option value="Overlay">Overlay </option>
            <option value="Multiple">Multiple </option>
        </select><p>
          <div id="OverlayParams" style="display:none"> 
            Overlay N histos (2-8):
            <input type="number" id="overlay_number" min="2" max="8" value="2" onchange="updatePlots(true);"><p>
              <br>
          </div>
          <div id="MultipleParams" style="display:none"> 
          </div>
          
          
      </div>
      
      <!--- Main graphs --> 
      <div class="col-md-8" >
        
        <div id="graphdiv" ></div>
        <div id="graphdiv21" style="display:none"></div>
        <div id="graphdiv22" style="display:none"></div>
        
        <div id="OverlayParams22" style="display:none"> 
        </div>        
        
      </div>
      
      
    </div>
    
  

  </div>
  
  <!--- Status --> 
  <p>
  <p>Read back status: <span id="readstatus"></span> <p>
  Last updated: <span id="datetime"></span>

</body>

</html>
